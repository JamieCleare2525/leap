- grades = Settings.qqoe_grade.split ","
#home.row
  #progress.panel.panel-default
    .panel-body
      .col-xs-12
        - @progress_bar.each do |key, a|
          .course-progress
            .row
              .col-xs-2.course-attendance
                %h4 Attendance
                %h3 #{a["course"].course_type.upcase}
                %h3 #{a["attendance"].att_year}%
            .row
              - (1..5).each do |i|
                - if (a["reviews"][i].present? && a["reviews"][i].number == i)
                  .col-xs-2.review-section{ :style => 'width: 17%;', :class => a["reviews"][i].level}
                    %h5 Working at
                    %h4 #{a["reviews"][i].working_at}
                    %br
                    %h4.pull-bottom.pull-right #{i}
                - else
                  .col-xs-2.review-section{ :style => 'width: 17%; color: grey', :onClick => 'displayReview("'+ i.to_s + '", "' + a["course"].course_code + '", "'+ a["attendance"].att_year.to_s + '")'}
                    %h5 Review
                    %h4 Pending
                    %br
                    %h4.pull-bottom.pull-right #{i}

            #review-modal.modal.fade
              .modal-dialog
                .modal-content
                  .modal-header
                    %h3.modal-title Review 1 for CORE
                  = create_event_form ProgressReview do |f|
                    = f.text_field :topic_id, :type => 'hidden', :readonly => true, :value => @topic.id
                    = f.text_field :progress_id, :type => 'hidden', :readonly => true
                    .modal-body.row
                      .form-group.col-md-12
                        .form-group.row
                          .col-md-3
                            = f.label ('Review Number'), :for => :progress_review_number
                            = f.text_field :number, :readonly => true, :class => 'form-control'
                          .col-md-4
                            = f.label ('Working at'), :for => :progress_review_working_at
                            = f.select(:working_at, options_for_select(grades), {}, {:class => 'form-control'})
                          .col-md-3
                            = f.label ('Attendance'), :for => :attendance
                            = f.text_field :attendance, :readonly => true, :class => 'form-control'
                      .form-group.col-md-12
                        = f.label ('Learner / Tutor Comments')
                        = f.text_area :body, :style => "height:200px", :placeholder => "#{@topic.possessive_name('Your')} review comments...", :class => 'form-control'
                      .form-group.col-md-12
                        .form-group.row
                          .col-md-4
                            %label Current Level
                            %select{ :name => "progress_review[level]", :class => 'form-control level', :id => 'progress_review_level', :required => 'required'}
                              %option{:value => '', :selected => true, :disabled => true}= "Choose"
                              %option{:value => 'purple', :class => 'purple'}= "PURPLE"
                              %option{:value => 'green', :class => 'green'}= "GREEN"
                              %option{:value => 'amber', :class => 'amber'}= "AMBER"
                              %option{:value => 'red', :class => 'red'}= "RED"
                    .modal-footer
                      = add_event_button
            :javascript
              function displayReview(n, cc, att) {
                $('.modal-title').text('Review ' + n + ' for ' + cc);
                $('#progress_review_number').val(n);
                $('#progress_review_attendance').val(att + '%');
                $('#progress_review_course_code').val(cc);
                $('#progress_review_progress_id').val('#{@topic.id.to_s}_' + cc)
                $('#review-modal').modal('show');
              }



