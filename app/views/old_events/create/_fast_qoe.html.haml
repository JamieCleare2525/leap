- qual_types = Settings.qqoe_qual_type.split ","
- awarding_bodies = Settings.qqoe_awarding_body.split ","
- subjects = Settings.qqoe_subject.split ","
- grades = Settings.qqoe_grade.split ","
- select = Settings.qqoe_select_type == "Select"

%h2 Add a Qualification
= create_event_form Qualification do |f|
  .span10
    .row
      .span1= image_tag "events/qualifications.png"
      .span3.qqoe_quick_buttons
        %h4 Qualification
        - if select
          = f.select :qual_type, qual_types, {}, {:class => "span3"}
        = f.text_field :qual_type, :class => "span3", :placeholder => "e.g. GCSE"
      .span5.qqoe_quick_buttons
        %h4 Subject
        - if select
          = f.select :title, subjects, {}, {:class => "span5"}
        = f.text_field :title, :class => "span5", :placeholder => "e.g. Maths"
    .row{:style => "margin-top:10px"}
      .span2.offset1.qqoe_quick_buttons
        %h4 Awarding Body
        - if select
          = f.select :awarding_body, awarding_bodies, {}, {:class => "span2"}
        = f.text_field :awarding_body, :class => "span2", :placeholder => "e.g. AQA"
      .span1.qqoe_quick_buttons
        %h4 Grade
        - if select
          = f.select :grade, grades, {}, {:class => "span1"}
        = f.text_field :grade, :class => "span1"
      .span1
        %h4 Year
        = f.date_select :created_at, {:order => [:year], :start_year => 1970, :end_year => Date.today.year + 1, 
                                      :default => {:month => 8,:day => 1}}, {:class => "span1"}
      .span1
        %h4 Seen / predicted?
        = f.check_box :seen
        = f.check_box :predicted
    .row
      - if Person.user.staff?
        .span2.offset6{:style => "margin-top:10px"}
          = link_to "Add Predicted Grade", class: "btn btn-warning", id: "add-predicted"
        .span2{:style => "margin-top:10px"}
          = link_to "Add Result", class: "btn btn-primary", id: "add-result"
      - else
        = add_event_button

- if select
  :coffeescript
    $('.qqoe_quick_buttons input').attr("disabled","disabled").hide()
    $('.qqoe_quick_buttons select').on "change", (e) ->
      if $(this).val() == "OTHER"
        $(this).next('input').show().removeAttr('disabled')
        $(this).next('input').focus()
        $(this).hide().attr("disabled","disabled")
        
